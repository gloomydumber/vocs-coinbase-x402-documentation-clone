---
title: 판매자를 위한 빠른 시작
---

import { Callout } from "vocs/components";

# 판매자를 위한 빠른 시작

이 가이드에서는 x402와 통합하여 API 또는 서비스에 대한 결제를 활성화하는 방법을 안내합니다.
가이드를 완료하면 API에서 구매자와 AI 에이전트에게 액세스 요금을 청구할 수 있게 됩니다.

<Callout type="note">

이 빠른 시작은 안전한 테스트를 위한 테스트넷 구성부터 시작합니다.
프로덕션 준비가 되면 Base(EVM) 및 Solana 네트워크에서 실제 결제를 수락하는 데 필요한 간단한 변경 사항은
[**"메인넷에서 실행"**](https://docs.cdp.coinbase.com/x402/quickstart-for-sellers#running-on-mainnet)을 참조하세요.

</Callout>

<Callout type="info">

이 내용은 공식 CDP 문서에 해당합니다. 커뮤니티에서 관리되는 문서는 [**x402.gitbook.io/x402**](x402.gitbook.io/x402)에서 확인할 수 있습니다.

도움이 필요하면 [**x402 디스코드**](https://discord.gg/cdp)에 방문해주세요.

</Callout>

## 필수 조건

시작하기 전에 다음 사항을 확인하세요.

- USDC가 포함된 암호화폐 지갑(EVM 호환 지갑, 예:
  [**CDP Wallet**](https://docs.cdp.coinbase.com/server-wallets/v1/concepts/wallets),
  [**AgentKit**](https://docs.cdp.coinbase.com/agent-kit/welcome))
- [**Node.js**](https://nodejs.org/en)와 npm, 또는 python과 pip
- x402를 통한 결제가 필요한 서비스

<Callout type="info">
  저희 [**저장소**](https://github.com/coinbase/x402/tree/main/examples)에는
  fetch, Axios, MCP에 대한 예제를 포함하여 미리 구성된 예제가 있습니다.
</Callout>

## 1. 종속성 설치

[**x402 Express**](https://www.npmjs.com/package/x402-express) 미들웨어 패키지를 설치하세요

[**x402 Next.js**](https://www.npmjs.com/package/x402-next) 미들웨어 패키지를 설치하세요

[**x402 Hono**](https://www.npmjs.com/package/x402-hono) 미들웨어 패키지를 설치하세요

:::code-group

```bash [Node.js (Express)]
npm install x402-express
npm install @coinbase/x402 # for the mainnet facilitator
```

```bash [Node.js (Next.js)]
npm install x402-next
npm install @coinbase/x402 # for the mainnet facilitator
```

```bash [Node.js (Hono)]
npm install x402-hono
npm install @coinbase/x402 # for the mainnet facilitator
```

:::

[**x402 Python 패키지**](https://pypi.org/project/x402/)를 설치하세요

```bash
pip install x402
pip install cdp # for the mainnet facilitator
```

<Callout type="note">

메인넷 퍼실리테이터 패키지( `@coinbase/x402` Node.js, `cdp` Python용)는 프로덕션 환경에만 필요합니다.
테스트넷 개발 시에는 이 패키지를 건너뛸 수 있습니다.
자세한 내용은 [**메인넷 실행**](https://docs.cdp.coinbase.com/x402/quickstart-for-sellers#running-on-mainnet)을 참조하세요.

</Callout>

## 2. 결제 미들웨어 추가

결제 미들웨어를 애플리케이션에 통합하세요. 다음 사항을 제공해야 합니다.

- Facilitator URL 또는 facilitator 객체입니다. 테스트용으로는 `https://x402.org/facilitator` Base Sepolia와 Solana Devnet에서 작동하는 기능을 사용하세요.
  - 메인넷 설정에 대해서는 [메인넷에서 실행](https://docs.cdp.coinbase.com/x402/quickstart-for-sellers#running-on-mainnet)을 참조하세요.
- 보호하려는 경로
- 수신 지갑 주소

<Callout type="tip">

아래 예시는 테스트넷 구성을 보여줍니다.
실제 결제를 받을 준비가 되면 [**"메인넷에서 실행"**](https://docs.cdp.coinbase.com/x402/quickstart-for-sellers#running-on-mainnet) 을 참조하여
필요한 간단한 변경 사항을 확인하세요.

</Callout>

전체 예는 여기 [**저장소**](https://github.com/coinbase/x402/tree/main/examples/typescript/servers/express)에서 확인 할 수 있습니다.

:::code-group

```javascript [Node.js (Express)]
import express from "express";
import { paymentMiddleware, Network } from "x402-express";
// import { facilitator } from "@coinbase/x402"; // For mainnet

const app = express();

app.use(
  paymentMiddleware(
    "0xYourAddress", // your receiving wallet address
    {
      // Route configurations for protected endpoints
      "GET /weather": {
        // USDC amount in dollars
        price: "$0.001",
        network: "base-sepolia", // for mainnet, see Running on Mainnet section
        // Optional: Add metadata for better discovery in x402 Bazaar
        config: {
          description: "Get current weather data for any location",
          inputSchema: {
            type: "object",
            properties: {
              location: { type: "string", description: "City name" },
            },
          },
          outputSchema: {
            type: "object",
            properties: {
              weather: { type: "string" },
              temperature: { type: "number" },
            },
          },
        },
      },
    },
    {
      url: "https://x402.org/facilitator", // for testnet
    }
  )
);

// Implement your route
app.get("/weather", (req, res) => {
  res.send({
    report: {
      weather: "sunny",
      temperature: 70,
    },
  });
});

app.listen(4021, () => {
  console.log(`Server listening at http://localhost:4021`);
});
```

```javascript [Node.js (Next.js)]
import { paymentMiddleware, Network } from "x402-next";
// import { facilitator } from "@coinbase/x402"; // For mainnet

// Configure the payment middleware
export const middleware = paymentMiddleware(
  "0xYourAddress", // your receiving wallet address
  {
    // Route configurations for protected endpoints
    "/protected": {
      price: "$0.01",
      network: "base-sepolia", // for mainnet, see Running on Mainnet section
      config: {
        description: "Access to protected content",
        // Optional: Add schemas for better discovery
        inputSchema: {
          type: "object",
          properties: {},
        },
        outputSchema: {
          type: "object",
          properties: {
            content: { type: "string" },
          },
        },
      },
    },
  },
  {
    url: "https://x402.org/facilitator", // for testnet
  }
);

// Configure which paths the middleware should run on
export const config = {
  matcher: ["/protected/:path*"],
};
```

```javascript [Node.js (Hono)]
import { Hono } from "hono";
import { serve } from "@hono/node-server";
import { paymentMiddleware, Network } from "x402-hono";
// import { facilitator } from "@coinbase/x402"; // For mainnet

const app = new Hono();

// Configure the payment middleware
app.use(
  paymentMiddleware(
    "0xYourAddress", // your receiving wallet address
    {
      // Route configurations for protected endpoints
      "/protected-route": {
        price: "$0.10",
        network: "base-sepolia", // for mainnet, see Running on Mainnet section
        config: {
          description: "Access to premium content",
        },
      },
    },
    {
      url: "https://x402.org/facilitator", // for testnet
    }
  )
);

// Implement your route
app.get("/protected-route", (c) => {
  return c.json({ message: "This content is behind a paywall" });
});

serve({
  fetch: app.fetch,
  port: 3000,
});
```

:::

:::code-group

```python [Python (FastAPI)]
import os
from typing import Any, Dict
from dotenv import load_dotenv
from fastapi import FastAPI
from x402.fastapi.middleware import require_payment
from x402.types import EIP712Domain, TokenAmount, TokenAsset

# Load environment variables
load_dotenv()

app = FastAPI()

# Apply payment middleware to specific routes
app.middleware("http")(
    require_payment(
        path="/weather",
        price="$0.001",
        pay_to_address="0xYourAddress",
        network_id="base-sepolia", # for mainnet, see Running on Mainnet section
        # Optional: Add metadata for better discovery in x402 Bazaar
        description="Get current weather data for any location",
        input_schema={
            "type": "object",
            "properties": {
                "location": {"type": "string", "description": "City name"}
            }
        },
        output_schema={
            "type": "object",
            "properties": {
                "weather": {"type": "string"},
                "temperature": {"type": "number"}
            }
        }
    )
)

@app.get("/weather")
async def get_weather() -> Dict[str, Any]:
    return {
        "report": {
            "weather": "sunny",
            "temperature": 70,
        }
    }
```

```python [Python (Flask)]
import os
from flask import Flask, jsonify
from dotenv import load_dotenv
from x402.flask.middleware import PaymentMiddleware
from x402.types import EIP712Domain, TokenAmount, TokenAsset

# Load environment variables
load_dotenv()

app = Flask(__name__)

# Initialize payment middleware
payment_middleware = PaymentMiddleware(app)

# Apply payment middleware to specific routes
payment_middleware.add(
    path="/weather",
    price="$0.001",
    pay_to_address="0xYourAddress",
    network="base-sepolia", # for mainnet, see Running on Mainnet section
    # Optional: Add metadata for better discovery in x402 Bazaar
    description="Get current weather data for any location",
    input_schema={
        "type": "object",
        "properties": {
            "location": {"type": "string", "description": "City name"}
        }
    },
    output_schema={
        "type": "object",
        "properties": {
            "weather": {"type": "string"},
            "temperature": {"type": "number"}
        }
    }
)

@app.route("/weather")
def get_weather():
    return jsonify({
        "report": {
            "weather": "sunny",
            "temperature": 70,
        }
    })
```

:::

<Callout type="note">

실제 결제를 받을 준비가 되셨나요?
프로덕션 설정을 위해 [**메인넷에서 실행**](https://docs.cdp.coinbase.com/x402/quickstart-for-sellers#running-on-mainnet)을 참조하세요.

</Callout>

**결제 미들웨어 구성 인터페이스**:

```typescript
interface PaymentMiddlewareConfig {
  description?: string; // Description of the payment
  mimeType?: string; // MIME type of the resource
  maxTimeoutSeconds?: number; // Maximum time for payment (default: 60)
  outputSchema?: Record; // JSON schema for the response
  customPaywallHtml?: string; // Custom HTML for the paywall
  resource?: string; // Resource URL (defaults to request URL)
}
```

이러한 경로에 대한 요청이 지불 없이 이루어지면 서버는 HTTP 402 지불 필요 코드와 지불 지침으로 응답합니다.

## 3. 통합 테스트

확인하려면:

1. 엔드포인트(예: )에 요청을 합니다 `curl http://localhost:3000/your-endpoint`.
2. 서버는 본문에 결제 지침을 포함하여 402 결제 필요를 응답합니다.
3. 호환되는 클라이언트, 지갑 또는 자동화된 에이전트를 사용하여 결제를 완료하세요.
   일반적으로 결제 페이로드에 서명하는 과정이 포함되며,
   이는 [**구매자를 위한 빠른 시작**](https://docs.cdp.coinbase.com/x402/quickstart-for-buyers) 에 자세히 설명된 클라이언트 SDK에서 처리됩니다.
4. 이번에는 `X-PAYMENT` 암호화된 지불 증명(지불 페이로드)이 포함된 헤더를 포함하여 요청을 다시 시도합니다.
5. 서버는 중개자를 통해 결제를 확인하고, 유효한 경우 실제 API 응답(예: `{ "data": "Your paid API response." }`)을 반환합니다.

## 4. 메타데이터를 사용하여 검색 기능 향상 (권장)

CDP 퍼실리테이터를 사용하면 구매자와 AI 에이전트가 서비스를 찾을 수 있도록 돕는 검색 레이어인 x402 Bazaar 에 엔드포인트가 자동으로 나열 됩니다.
가시성을 높이고 사용자가 API를 쉽게 이해할 수 있도록 다음 단계를 따르세요.

<Callout type="tip">

미들웨어 구성에 **설명적 메타데이터**를 포함합니다 .

- `description`: 엔드포인트가 무엇을 하는지에 대한 명확한 설명
- `inputSchema`: 필수 매개변수를 설명하는 JSON 스키마
- `outputSchema`: 응답 형식의 JSON 스키마

이 메타데이터는 다음에 도움이 됩니다.

- AI 에이전트는 API 사용 방법을 자동으로 이해합니다.
- 개발자는 자신의 요구 사항을 충족하는 서비스를 빠르게 찾을 수 있습니다.
- 검색 결과에서 순위를 개선하세요

</Callout>

전체 메타데이터가 포함된 예:

```json
{
  "price": "$0.001",
  "network": "base",
  "config": {
    "description": "Get real-time weather data including temperature, conditions, and humidity",
    "inputSchema": {
      "type": "object",
      "properties": {
        "location": {
          "type": "string",
          "description": "City name or coordinates (e.g., 'San Francisco' or '37.7749,-122.4194')"
        },
        "units": {
          "type": "string",
          "enum": ["celsius", "fahrenheit"],
          "default": "fahrenheit"
        }
      },
      "required": ["location"]
    },
    "outputSchema": {
      "type": "object",
      "properties": {
        "temperature": {
          "type": "number",
          "description": "Current temperature"
        },
        "conditions": {
          "type": "string",
          "description": "Weather conditions (sunny, cloudy, rainy, etc.)"
        },
        "humidity": { "type": "number", "description": "Humidity percentage" }
      }
    }
  }
}
```

[**x402 Bazaar 문서**](https://docs.cdp.coinbase.com/x402/bazaar)에서 검색 계층에 대해 자세히 알아보세요 .

## 5. 오류 처리

문제가 발생하면 [**저장소**](https://github.com/coinbase/x402/tree/main/examples)의 예제를 확인하여 더 자세한 정보와 전체 코드를 확인하세요.

`npm install` 각 예제의 종속성

## 메인넷에서 실행

테스트넷에서 통합을 테스트한 후 메인넷에서 실제 결제를 수락할 준비가 되었습니다.

### 프로덕션을 위한 CDP Facilitator 설정

CDP의 중개자는 규정 준수 기능을 갖춘 엔터프라이즈급 결제 처리를 제공합니다.

<iframe
  width="560"
  height="315"
  src="https://www.youtube.com/embed/Zc_wBlDY2Zc"
  frameborder="0"
  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
  allowfullscreen
></iframe>

### 1. CDP API 키 설정

메인넷 지원 서비스를 이용하려면 Coinbase 개발자 플랫폼 계정이 필요합니다.

1. cdp.coinbase.com 에서 가입하세요
2. 새 프로젝트를 만듭니다
3. API 자격 증명 생성
4. 다음 환경 변수를 설정하세요

```bash
CDP_API_KEY_ID=your-api-key-id
CDP_API_KEY_SECRET=your-api-key-secret
```

### 2. 코드 업데이트

테스트넷 구성을 메인넷 설정으로 바꾸세요:

:::code-group

```javascript [Node.js]
// Change your imports
import { facilitator } from "@coinbase/x402";

// Update the middleware configuration
app.use(
  paymentMiddleware(
    "0xYourAddress",
    {
      "GET /weather": {
        price: "$0.001",
        network: "base",
      },
    },
    facilitator // this was previously { url: "https://x402.org/facilitator" }
  )
);

// or for Next.js with Solana
export const middleware = paymentMiddleware(
  "YourSolanaWalletAddress", // Use your Solana wallet address
  {
    "GET /weather": {
      price: "$0.001",
      network: "solana",
    },
  },
  facilitator // this was previously { url: "https://x402.org/facilitator" }
);
```

```python [Python]
from cdp.x402 import create_facilitator_config

facilitator_config = create_facilitator_config(
    api_key_id=CDP_API_KEY_ID,
    api_key_secret=CDP_API_KEY_SECRET,
)

# Update the middleware configuration (FastAPI)
app.middleware("http")(
    require_payment(
        path="/weather",
        price="$0.001",
        pay_to_address="0xYourAddress",
        network_id="base", # Changed from "base-sepolia"
        facilitator_config=facilitator_config,
    )
)

# Or for Flask:
payment_middleware.add(
    path="/weather",
    price="$0.001",
    pay_to_address="0xYourAddress",
    network="base", # Changed from "base-sepolia"
    facilitator_config=facilitator_config,
)
```

:::

### 3. 지갑 업데이트

지불을 받으려는 수신 지갑 주소(`0xYourAddressUSDC`)가 실제 메인넷 주소인지 확인하세요 .

### 4. 실제 결제로 테스트

라이브 방송을 시작하기 전에:

1. 먼저 소량으로 테스트하세요
2. 지갑에 결제가 도착하는지 확인하세요
3. 문제가 있는지 촉진자를 모니터링합니다.

<Callout type="warning">

메인넷 거래에는 실제 돈이 사용됩니다. 테스트넷에서 먼저 철저하게 테스트하고, 메인넷에서는 소액으로 시작하세요.

</Callout>

### 5. 다양한 네트워크 사용

CDP facilitator는 여러 네트워크를 지원합니다. 네트워크 매개변수를 변경하기만 하면 됩니다.

:::code-group

```javascript [Base Network]
// Node.js/Express
app.use(
  paymentMiddleware(
    "0xYourAddress",
    {
      "GET /weather": {
        price: "$0.001",
        network: "base",
      },
    },
    facilitator
  )
);

// Next.js
export const middleware = paymentMiddleware(
  "0xYourAddress",
  {
    "GET /weather": {
      price: "$0.001",
      network: "base",
    },
  },
  facilitator
);
```

```javascript [Solana Network]
// Node.js/Express
app.use(
  paymentMiddleware(
    "YourSolanaWalletAddress", // Use your Solana wallet address
    {
      "GET /weather": {
        price: "$0.001",
        network: "solana",
      },
    },
    facilitator
  )
);

// Next.js
export const middleware = paymentMiddleware(
  "YourSolanaWalletAddress", // Use your Solana wallet address
  {
    "GET /weather": {
      price: "$0.001",
      network: "solana",
    },
  },
  facilitator
);
```

```python [Python Examples]
# FastAPI with Solana
app.middleware("http")(
    require_payment(
        path="/weather",
        price="$0.001",
        pay_to_address="YourSolanaWalletAddress",
        network_id="solana",
        facilitator_config=facilitator_config,
    )
)

# Flask with Solana
payment_middleware.add(
    path="/weather",
    price="$0.001",
    pay_to_address="YourSolanaWalletAddress",
    network="solana",
    facilitator_config=facilitator_config,
)
```

```javascript [Testnet Networks]
// For testing on Base Sepolia
network: "base-sepolia";

// For testing on Solana Devnet
network: "solana-devnet";
```

:::

<Callout type="info">

Polygon이나 Avalanche와 같은 추가 네트워크에 대한 지원이 필요하신가요?
직접 퍼실리테이터를 운영하거나 CDP 지원팀에 문의하여 새로운 네트워크 추가를 요청하실 수 있습니다.

</Callout>

## 다음 단계

- 좀 더 고급 기능을 원하시나요? [**고급 예제**](https://github.com/coinbase/x402/tree/main/examples/typescript/servers/advanced)를 확인해 보세요.
- [**구매자**](https://docs.cdp.coinbase.com/x402/quickstart-for-buyers)로 시작하기

질문이나 지원이 필요하면 [**디스코드**](https://discord.gg/invite/cdp)에 방문하세요.

## 요약

이 빠른 시작에서는 다음 내용을 다루었습니다.

- x402 SDK 및 관련 미들웨어 설치
- API에 결제 미들웨어 추가 및 구성
- 통합 테스트

이제 귀하의 API는 x402를 통해 암호화폐 결제를 수락할 준비가 되었습니다.
